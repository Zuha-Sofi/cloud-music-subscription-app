<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Main Page</title>
</head>
<body>
    <h1>Welcome, {{ username }}!</h1>
    <a href="/logout">Logout</a>

    <hr>

    <!-- ðŸ§‘ User Area -->
    <h2>User Area</h2>
    <p>Logged in as: <strong>{{ username }}</strong></p>

    <hr>

    <!-- ðŸŽµ Subscription Area -->
    <h2>Subscription Area</h2>
    {% if subscriptions %}
        {% for song in subscriptions %}
            <div style="border:1px solid black; padding:10px; margin:10px;">
                <p><strong>Title:</strong> {{ song.title }}</p>
                <p><strong>Artist:</strong> {{ song.artist }}</p>
                <p><strong>Year:</strong> {{ song.year }}</p>
                <p><strong>Album:</strong> {{ song.album }}</p>
                <img src="{{ song.image_url }}" alt="Artist Image" width="200"><br><br>
                
                <form method="POST" action="/remove">
                    <input type="hidden" name="title" value="{{ song.title }}">
                    <input type="hidden" name="artist" value="{{ song.artist }}">
                    <button type="submit">Remove</button>
                </form>
            </div>
        {% endfor %}
    {% else %}
        <p>No subscribed songs yet.</p>
    {% endif %}

    <hr>

    <!-- ðŸ”Ž Query Area -->
    <!-- ðŸ”Ž Query Area -->
    <h2>Query Area</h2>
    <form method="POST" action="/query">
        <label>Title:</label><br>
        <input type="text" name="title"><br><br>

        <label>Artist:</label><br>
        <input type="text" name="artist"><br><br>

        <label>Year:</label><br>
        <input type="text" name="year"><br><br>

        <label>Album:</label><br>
        <input type="text" name="album"><br><br>

        <button type="submit">Query</button>
    </form>

    <!-- Display Message -->
    {% if message %}
        <p style="color: red; margin-top: 10px;">{{ message }}</p>
    {% endif %}

    <!-- Query Results -->
    {% if results %}
        <h3>Query Results:</h3>
        {% for song in results %}
            <div style="border:1px solid green; padding:10px; margin:10px;">
                <p><strong>Title:</strong> {{ song.title }}</p>
                <p><strong>Artist:</strong> {{ song.artist }}</p>
                <p><strong>Year:</strong> {{ song.year }}</p>
                <p><strong>Album:</strong> {{ song.album }}</p>
                <img src="{{ song.image_url }}" alt="Artist Image" width="200"><br><br>

                <form method="POST" action="/subscribe">
                    <input type="hidden" name="title" value="{{ song.title }}">
                    <input type="hidden" name="artist" value="{{ song.artist }}">
                    <input type="hidden" name="year" value="{{ song.year }}">
                    <input type="hidden" name="album" value="{{ song.album }}">
                    <input type="hidden" name="image_url" value="{{ song.image_url }}">
                    <button type="submit">Subscribe</button>
                </form>
            </div>
        {% endfor %}
    {% endif %}
</body>
</html>